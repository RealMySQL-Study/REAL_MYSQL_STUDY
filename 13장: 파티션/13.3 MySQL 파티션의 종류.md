기본 파티션 4가지
+ 레인지 파티션
+ 리스트 파티션
+ 해시 파티션
+ 키 파티션

해시와 키 파티션은 리니어(Linear) 파티션 같은 추가적인 기법도 제공

# 13.3.1 레인지 파티션

파티션 키의 연속된 범위로 파티션을 정의하는 방법

MAXVALUE 라는 키워드를 이용해 명시되지 않은 범위의 키 값이 담긴 레코드를 저장하는 파티션을 정의할 수 있음

## 13.3.1.1 레인지 파티션의 용도

+ 날짜를 기반으로 데이터가 누적되고 연도나 월 일 단위로 분석하고 삭제해랴 될 때
+ 범위 기반으로 데이터를 여러 파티션에 균등하게 나눌 수 있을 때
+ 파티션 키 위주로 검색이 자주 실행될 때

파티션의 장점은 큰 테이블을 작은 크기의 파티션으로 나눈다는 것과 필요한 파티션만 접근(쓰기, 읽기)이 가능하다는 것임

두번째 장점의 효과가 매우 큰편인데 첫번째 장점에 집중하여 두번째 장점을 취하지 못하는 경우가 있음

이럴 경우는 파티션 때문에 오히려 성능이 저하됨

## 13.3.1.2 레인지 파티션 테이블 생성

```sql
CREATE TABLE EMPLOYEES2(
	ID INT NOT NULL,
    FIRST_NAME VARCHAR(30),
    LAST_NAME VARCHAR(30),
    HIRED DATE NOT NULL DEFAULT '1970-01-01'
) PARTITION BY RANGE(YEAR(HIRED)) (
  PARTITION P0 VALUES LESS THAN (1991),
  PARTITION P1 VALUES LESS THAN (1996),
  PARTITION P2 VALUES LESS THAN (2001),
  PARTITION P3 VALUES LESS THAN MAXVALUE
);
```

+ PARTITION BY RANGE 키워드로 레인지 파티션을 정의
+ PARTITION BY RANGE 뒤에 컬럼 또는 내장함수를 이용해 파티션 키를 명시
+ VALUE LESS THAN 으로 명시된 값보다 작은 값만 해당 파티션에 저장하게 설정(LESS THAN 에 명시된 값은 그 파티션에 포함되지 않음)
+ VALUE LESS THAN MAXVALUE로 명시되지 않은 레코드를 저장할 파티션을 지정(선택사항)
+ VALUE LESS THAN MAXVALUE 가 정의되지 않으면 정의되지 않은 범위가 INSERT 될 때 에러 발생

## 13.3.1.3 레인지 파티션의 분리와 병합

### 13.3.1.3.1 단순 파티션의 추가

```SQL
-- 파티션 추가 명령어, but 기존에 정의했던 LESS THAN MAXVALUE 때문에 에러뜸
ALTER TABLE EMPLOYEES2 ADD PARTITION (PARTITION P4 VALUES LESS THAN (2011));
```

위처럼 하게 되면 하나의 레코드는 하나의 파티션에만 저장되어야 한다는 조건에서 벗어남

아래처럼 ``ALTER TABLE ... REORGANIZE PARTITION`` 명령을 사용해야 함

```SQL
ALTER TABLE EMPLOYEES2 ALGORITHM=INPLACE, LOCK=SHARED,
	REORGANIZE PARTITION P3 INTO (
		PARTITION P3 VALUES LESS THAN (2011),
        PARTITION P4 VALUES LESS THAN MAXVALUE
    );
```

``ALTER TABLE ... REORGANIZE PARTITION`` 은 기존 파티션의 레코드를 모두 새로운 2개의 파티션으로 복사하는 작업을 함

기존 파티션의 레코드가 많다면 작업이 오래걸림

레인지 파티션의 경우에는 보통 ``LESS THAN MAXVALUE`` 사용하기 보단 미래에 사용할 파티션을 2~3개 정도 미리 만들어 놓음

배치 스크립트를 이용해 주기적으로 파티션을 자동으로 추가하는 방법을 사용하기도 하는데

이런 경우 배치 스크립트 오류로 파티션이 자동 추가되지 못했을때 큰 문제가 됨

``MAXVALUE`` 은 INSERT 되는 데이터의 특성이나 배치 스크립트의 안정성에 따라 결정하면됨


### 13.3.1.3.2 파티션 삭제

``DROP PARTITION [파티션명]`` 을 사용해 삭제 가능

레인지 파티션이나 리스트 파티션은 파티션 삭제 작업이 아주 빠름

```SQL
ALTER TABLE EMPLOYEES2 DROP PARTITION P0;
```

레인지 파티션을 사용하면 항상 가장 오래된 파티션 순서로만 삭제 가능

중간에 있는 파티션을 삭제 불가

추가도 가장 마지막 파티션만 추가 가능


### 13.3.1.3.3 기존 파티션의 분리

### 13.3.1.3.4 기존 파티션의 병합

<br>

# 13.3.2 리스트 파티션


<br>

# 13.3.3 해시 파티션


<br>

# 13.3.4 키 파티션


<br>

# 13.3.5 리니어 해시 파티션/리니어 키 파티션


<br>

# 13.3.6 파티션 테이블의 쿼리 성능




































