# 디스크 읽기 방식
데이터베이스의 성능 튜닝은 어떻게 디스크 I/O를 줄이느냐가 관건일 때가 상당히 많다.  

## 하드 디스크 드라이브(HDD)와 솔리드 스테이트 드라이브(SSD)
컴퓨터에서 CPU나 메모리 같은 주요 장치는 대부분 전자식 장치지만 하드 디스크 드라이브는 기계식 장치다.  
그래서 데이터베이스 서버에서는 항상 디스크 장치가 병목이 된다.  

#### HDD
![image](https://github.com/RealMySQL-Study/REAL_MYSQL_STUDY/assets/67637716/d8519252-fd7f-47eb-b6c8-06e61a7556ae)  

* 헤드 : 데이터를 읽어주는 역할
* 플래터 : 실제로 데이터가 저장되는 곳
* 스핀들 : 플래터를 돌려주는 역할
* actuator : 헤드가 플래터 위 데이터를 read/write 하기 위해서 헤드를 좌우로 이동시

=> 플래터에 데이터가 저장되며 스핀들이 플래터를 돌리며 헤드가 데이터를 읽는다.  

##### 플래터의 세부 구조
![image](https://github.com/RealMySQL-Study/REAL_MYSQL_STUDY/assets/67637716/129e4e70-1c7e-4794-8de1-1a819fb90548)  

* 섹터
  * 하드디스크의 가장 작은 저장 단위
  * 하나의 섹터에는 한 덩어리의 데이터가 저장되고 이들이 모여 플래터가 됨.
  * 일반적으로 512바이트
  * 한 섹터에는 하나의 파일만 저장 가능
  * 하나의 파일이 100바이트라고 하면 남은 412바이트는 낭비
* 클러스터
  * 섹터의 묶음
  * 데이터를 저장하기에 하나의 섹터가 모자랄 수 있으므로 연속된 섹터에 데이터 저장.
  * 데이터를 저장하려면 5개의 섹터가 필요한데 3개의 섹터만 연속되어 있다면 2개는 따로 있는 빈공간에 분산해서 저장해야한다. 이런 작업이 쌓이면 분산된 곳에서 데이터를 불러와야 하기 때문에 속도가 느려짐. => 디스크 조각모음이라는 기능을 추가해서 분산된 섹터를 모아서 이어 붙여줌.
* 트랙
  * 섹터와 클러스터의 모음
* 실린더
  * 트랙의 묶음
 
#### SSD
![image](https://github.com/RealMySQL-Study/REAL_MYSQL_STUDY/assets/67637716/787c0eb0-5b00-4874-aade-2f8767a286cb)  

* SSD는 HDD에서 플래터를 제거하고 그 대신 플래시 메모리를 장착하고 있다. 그래서 디스크 원판을 기계적으로 회전시킬 필요가 없으므로 아주 빨리 데이터를 읽고 쓸 수 있다.  
* 플래시 메모리는 전원이 공급되지 않아도 데이터가 삭제되지 않는다.  
* 컴퓨터의 메모리(D-RAM)보다는 느리지만, HDD보다는 훨씬 빠르다.

##### SSD의 세부 구조
![image](https://github.com/RealMySQL-Study/REAL_MYSQL_STUDY/assets/67637716/af3d16d6-49a7-4b52-b1d7-370c1b411445)  
SSD는 크게 컨트롤러와 플래시 메모리 두 부분으로 구성된다.  
사용자의 요청은 호스트 인터페이스를 통해 SSD에 전달된다.  
그 후엔 컨트롤러의 프로세서가 플래시 컨트롤러로 정보를 전달한다.  
SSD는 자체적으로 내장된 메모리를 가지는데, 주소 매핑 정보를 저장하거나 캐시의 용도로 사용된다.  


<hr>

디스크의 헤더를 움직이지 않고 한 번에 많은 데이터를 읽는 순차 I/O에서는 SSD가 HDD보다 조금 빠르거나 거의 비슷한 성능을 보인다.  
하지만 SSD의 장점은 HDD보다 랜덤 I/O가 훨씬 빠르다는 것이다.  
데이터베이스 서버에서 순차 I/O 작업은 그다지 비중이 크지 않고 랜덤 I/O를 통해 작은 데이터를 읽고 쓰는 작업이 대부분이므로  SSD의 장점은 DBMS용 스토리지에 최적이라고 볼 수 있다.  


